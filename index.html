<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
</head>
<style>
	.letter {
		white-space: pre-line;
		border-radius: 5px;
		margin: 1em 0;
		width: 100%;
		outline: none;
		border: 0 none;
		background-image: url("linedpaper.png");
		background-repeat: repeat;
		padding: 2em 1em .5em;
	}
</style>

<body>
	<div class="container">
		<h1>NoTatsukiNoTanoshi</h1>
		<div class="alert alert-danger">
			If users encountered error 500, please consider to use the E-mail method.<br>
			如果用戶遭遇500錯誤，請使用傳統郵件方法或者手動寄信。

			Sorry for any inconvenience caused.
			不便之處，敬請原諒。
		</div>

		Language:

		<select id="lang" class="form-control">
				<option value="en">English</option>
				<option value="zh">中文</option>
				<option value="ja">日本語</option>
		</select>
		
		<br>
		
		<div class="btn-group">
			<button id="g" class="btn btn-danger" data-type=0 onclick="mailAction(this)">Gmail</button>

			<button id="t" class="btn btn-info" data-type=1 onclick="mailAction(this)">傳統郵件(開啟郵件客戶端)</button>
		</div>
		<form class="form">

			<h4 id="mode"></h4>

			<div class="form-group">
				<label id="name">朋友的名字</label>
				<input type="text" class="form-control" id="sender" placeholder="Serval" required></input>
				<label id="country">朋友的國籍</label>
				<input type="text" class="form-control" id="country" placeholder="Foreign Country" required></input>
				<label id="recv">收件公司</label>
				<select id="sp" class="form-control"></select>
			</div>

			<div id="email">To: </div>
			<div class="letter markdown-body" id="mailBody"></div><br>

			<div id="submit" class="btn btn-warning" onclick="return sendEmail()">跳轉到發送頁面</div>
		</form>

	</div>

	<footer>
		<div class="container">
			Use beautiful background image from <a target="_blank" href="https://www.toptal.com/designers/subtlepatterns">Subtle Patterns</a>
		</div>
	</footer>




	<script type="text/javascript">
		class Sponsor {
			constructor(jp, ch, en, p_jp = "", p_en = "", email) {
				this.company = {
					"ja": jp,
					"zh": ch,
					"en": en
				};
				this.product = {
					"ja": p_jp,
					"zh": p_en,
					"en": p_en
				};
				this.email = email;
			}
		}
		const sps = [
			//new Sponsor("株式会社KADOKAWA", "KADOKAWA公司", "KADOKAWA CORPORATION", "", "", "seki@kadokawa.co.jp"),
			new Sponsor("株式会社テレビ東京", "東京電視台", "TV TOKYO Corporation", "", "", "privacy@txshop.jp"),
			//new Sponsor("株式会社ファミマ・ドット・コム", "famima.com", "famima.com Co., Ltd.", "ファミリーマート", "Family Mart", ""),
			//new Sponsor("日本ビクター株式会社", "JVC", "JVC", "音楽CD", "Audio CD", ""),
			new Sponsor("クランチロール", "Crunchyroll", "Crunchyroll", "ネット放送サービス", "Web Broadcast Service", "support@crunchyroll.com"),
			new Sponsor("アニメシアターX", "AT-X", "AT-X", "テレビ放送サービス", "TV Broadcast Service", "ppinfo@at-x.com"),
			new Sponsor("株式会社エス・ワイ・エス", "SYS公司", "SYS Inc.", "プリントサービス", "Printing Service", "info@sys-inc.jp"),
			new Sponsor("エイジグローバルネットワークス株式会社", "Age Global Networks", "Age Global Networks", "", "", "info@age-global.net"),
			new Sponsor("株式会社ジャストプロ", "JustPro", "Just Production Inc.", "", "", "info@just-pro.jp"),
			//new Sponsor("株式会社ドコモ・アニメストア", "DOCOMO動畫商城", "DOCOMO ANIME STORE, INC.", "ネット配信サービス", "Web Broadcast Service", "support@animate-onlineshop.jp"),
			new Sponsor("株式会社ブシロード", "株式會社武士道", "Bushiroad Inc.", "", "", "support@bushiroad.com"),
			new Sponsor("株式会社クロックワークス", "KlockWorx", "KlockWorx Co.ltd", "DVDレンタル", "DVD Rental Service", "info@klockworx.com"),
			//new Sponsor("日清食品グループ", "日清食品", "Nissin Food Group", "どん兵衛", "どん兵衛", "release@nissinfoods-holdings.co.jp"),
			//new Sponsor("けものフレンズカフェ", "動物朋友咖啡", "JAPARI CAFÉ CONCEPT", "DVD Rental Service", "JAPARI CAFÉ", "japaricafe.tokyo@gmail.com"),
			new Sponsor("株式会社ウルトラダイレクト", "Ultra Direct", "Ultra Direct", "けものフレンズカフェ", "JAPARI CAFÉ", "japaricafe.tokyo@gmail.com"),
			new Sponsor("にいがたアニメ・マンガフェスティバル実行委員会事務局", "新潟動漫節執行委員會", "The Niigata Anime and Manga Festival Committee", "がたふぇす限定グッズ", "Limited Goods", "bunka@city.niigata.lg.jp"),
			//new Sponsor("那須どうぶつ王国", "那須動物王國", "Nasu Animal Kingdom", "コラボグッズ", "Collaboration Goods", ""),
			new Sponsor("日本中央競馬会", "日本中央競馬會", "JRA", "", "", "inter@jra.go.jp"),
			new Sponsor("オンキヨー株式会社", "ONKYO", "Onkyo Corporation", "イヤホン", "Earphone", "customer@jp.onkyo.com"),
			//new Sponsor("株式会社ファミリーマート", "全家便利商店株式會社", "Familymart Co., Ltd.", "オリジナルグッズ", "Original Collboration Goods", "")
		];

		const langs = {
			'zh': {
				langText: '中文',
				g: "Gmail",
				//y: "Yahoo Mail",
				t: "傳統郵件(開啟郵件客戶端)",
				name: "朋友的名字",
				country: "朋友的國籍",
				recv: "收件公司",
				submit: "跳轉到發送頁面",
				modeText: ["Gmail (電腦)", "電子郵件 (手機)"]
			},
			"ja": {
				langText: '日本語',
				g: "Gmail",
				//y: "Yahoo Mail",
				t: "メールソフトで開く",
				mailBody: [
					'こんにちは、海外(%user_nationality%)からの支持者、%user_name%と申します。\n\n貴社とけものフレンズのコラボレーションしている関連商品とイベントも数多くて、それについてずっと忠実に応援しています。\n\nたつき監督レンズに関して、その重要さは誰とも代えられないと思います。\n最近ネットの情報によると、KADOKAWAはたつき監督を今シーズンのけものフレンズから降板させることを聞き、私と他の応援者はそれに関して理解不能でした。\n\nたつき監督は芸術的って、表現豊かなアニメ監督だと思います。たつき監督が作ったキャラクターは独特な魅力があると思います。\n\nそれこそ、私たちはけものフレンズの関連商品とイベントを支持する理由だったのです。\n\n貴社の忠実な愛用者として、このような巨大な変化は、喜んでる受け入れことはできません。アニメはクリエイティブカルチャーの一つだと思います。主要製作者の監督が外れることは不適切だと感じています。監督が本当に外されたら、関係者たちは視聴者のマイナスコメントを背負うリスクもあります。なぜならば、視聴者たちの感情を惹かれるのものは単純の商品ではなく、その素晴らしい芸術表現だと思います。\n\n貴社とのコラボレーション相手KADOKAWAさんは今シーズンのけものフレンズのたつき監督を外すことが事実であれば、消費者の私たちは、今後貴社が発売する関連商品や行う関連イベントを応援することをやめると考えています。これからも、貴社のこと末永く応援したいですが、KADOKAWAさんの無謀の決定のせいで、貴社に対し応援することはできないと思います。\n\nもしよければ、我々の意見を関係者の方々にお伝えてください。今度も貴社のことが応援したいです。よろしくお願いいたします。\n\n%user_name%、%user_nationality%より\n',
					'%company_name%さまへ：\n\n最近貴社の商品やサービスはけものフレンズというアニメとコラボしています。このコラボコマーシャルを通じて、私は海外の消費者として%company_name%への興味を湧いてきました。これはとっても素晴らしい企画で、私のような海外の%company_name%消費者は増え続けるのでしょう。\n\nしかしながら、残念なことに、最近角川グループはけものフレンズの監督．たつきさんを降板するというニュースが流れています。私を含めて、ファンの皆さんにはこの決定に対し疑惑、不満の声が溢れています。\n\nけものフレンズを愛し、応援し続けるファンたちにとって、たつき監督はとてもユニークなアートスタイルを持ち、芸術家といっても過言ではない者方で、けものフレンズは彼ならではの作品であり、私にとってもたつき監督はがいればこそけものフレンズ、並びにそのコラボグッズを応援し続ける唯一の理由でもあります。\n\n海外の消費者として、私はたつき監督の降板を反対いたします。アニメは芸術作品で、クリエイター、作者を簡単に変わる訳にはいかないいけません。それは作品への不敬であり、応援し続けてくれるファンにもあまりにも軽率な決定かと、私はそう思います。\n\nもし本当に監督が変えたら、「たつき監督のけものフレンズ」が目当てで、を応援してくれる海外の客が離れてしまうのでしょう。もしうまくいかなかったら、最悪の場合、ブランドの評判にも影響を及ばす恐れもあります。\n\n　　　もし%company_name%のビジネスパートナーである角川グループは監督降板の決定を撤回しなかった場合、私も含め、数多くのファンたちはきっと失望してしまうのでしょう。そしたら、今後相関グッズの購入意欲も減少し、もしかすると、ボイコットすることになる可能性もあります。\n\n　　　どうか角川グループ関係者に連絡して、その決定をもう一度考え直させて下さい。\n	\n\n　　　%company_name%の商品とサービスを使い続けたいです、本当に。\n\n\n%user_name%、%user_nationality%より\n'
				],
				mailSubject: ["けものフレンズの件について", "けものフレンズコラボの件について"],
				name: "フレンズの名前",
				country: "フレンズの縄張り",
				recv: "紙飛行機の届き先",
				submit: "メールのページへ",
				modeText: ["Gmail (パソコン)", "メール (携帯)"]
			},
			"en": {
				langText: 'English',
				g: "Gmail",
				//y: "Yahoo Mail",
				t: "Traditional mail",
				mailBody: [
					'Dear %company_name%:\n\nYour recent collaborative advertisement campaign with the “Kemono Friends Project” for your product has captivated a significant amount of customer interests, and there has been notable inquiries across the Japanese domestic and even overseas markets over this specific product. This is a major advertisement coup and which has resulted in a significant rise of this product’s exposure.\n\nI wish to bring to your attention that the resigning of Yaoyorozu Co., Ltd. from the “Kemono Friends Project” could put this advertisement into jeopardy, given that the animation director from the said company (whom you have worked with personally) has demonstrated his value in conveying your product in a positive light, with this man being one of the main creative driving force of the “Kemono Friends Project”.\n\nI, as a customer became interested in your product solely because of the work of this director. I wish to reflect that I am in opposition to this outcome and the failure of Kadokawa in retaining Yaoyorozu Co., Ltd. from resigning. I believe it will adversely affect your advertisement campaign in the future, both from customer backlash, and in a guaranteed decline over future deliverables due to this change in personal.\n\nFrankly, I feel that you would do your business harm if you were to ignore Kadokawa Corporation’s failure and continue to partner with Kemono Friends Project knowing that the charismatic creative force behind the original work is no longer working on this project. \n\nI strongly suggest your company to correspond with Kadokawa Group with regards to how this change in personal is likely to impact the corporate image of %company_name%, the marketability of your product and any future product that you wish for Kemono Friends Project to promote, and hopefully see a means for %company_name% to continue building on the success of this advertisement campaign in the future.\n\nSincerely yours,\n%user_name% from %user_nationality%.',
					'Dear Sir/Madam:\n\nAs one of the fans of Kemono Friends, and one of the loyal customers of your product, this letter is used to express our strong desire to have Yaoyorozu Co.,Ltd and its members involved in the production, including director Tatsuki and his team, the voice actors and other relevant personnels of Kemono Friends Anime Project back to their original post.\n\nYour company held a campaign which collaborated with the animation "Kemono Friends" recently, and that makes us and other fans fond of your product and following the company\'s promotional advertisement. This was brilliant move which had boosted your company\'s international brand recognition greatly.\n\nHowever, we learnt that Yaoyorozu Co.,Ltd. decided to resign from producing the animation  on 27th of September. We came to acknowledge that this decision was made under disputes, that Kadokawa Corporation has failed to come up with a suitable solution. We, as the series’ fans, felt agitated and found this undesired news regrettable. \n\nMr. Tatsuki is a great director, and an artist with a very unique style, which had endeared and amused net-savvy audience abound. His creation is the sole reason that I would support Kemono Friends and its corresponding products, in which includes your product that has advertised with the work. \n\nAs a loyal fan to the anime and customer to your brand\'s product, we are strongly against this outcome and would like the company to make more efforts in amending this dispute. It is already crystal clear that animation, as an artwork, cannot afford to have its creator easily replaced, at least not prematurely and imprudently. Such use-and-dump act is unwise and it is ungrateful to the hard work paid by the director and the animation studio members, as we believe there are much more efforts could be made by Kadokawa.\n\nWe are afraid that if the replacement really takes place, all the related enterprises must bear the risk for the fluctuation of the turnover made by the series. If Kadokawa Corporation, your business partner, will continue to ignore the severity of this outcome and refuse to make further efforts to convince Yaoyorozu Co.,Limited. from not resigning, us fans may be forced to reconsider our purchase choices, including your products, from future purchases.\n\nYour product and campaign has been genuinely fantastic, however Kadokawa Group\'s inaction may prevent us from from purchasing and consuming any related merchandises. We would like to request to %company_name% to contact Kadokawa Group and express our strong will of revoking this decision.\n\nWe would like to continue and contribute to the support of your product.\nShould you have more further enquiries, please do not hesitate to reply to this email.\n\nYours sincerely,\n%user_name%, from %user_nationality%.\n'
				],
				mailSubject: ['About your company\'s collaboration with Kemono Friends', 'Kemono Friends Inquiry'],
				name: "Friends\' name",
				country: "Friends\' nationality",
				recv: "Which to send",
				submit: "Compose an email",
				modeText: ["Gmail (For PC)", "E-Mail (For Mobile)"]
			}
		}

		const mailAPI = {
			0: "https://mail.google.com/mail/?view=cm&fs=1&to=!RECV!&su=!SUBJECT!&body=!BODY!",
			1: "mailto:!RECV!?subject=!SUBJECT!&body=!BODY!"
		}

		var mode = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) ? 1 : 0)
		var recv = sps[parseInt(Math.random() * sps.length)];
		var author = '';
		var country = "";
		var locale = ((lang) => {
			// get full list from https://stackoverflow.com/a/36042028
			switch (lang) {
				case 'zh-TW':
				case 'zh-CN':
				case 'zh-HK':
				case 'zh-SG':
					return 'zh';
				case 'ja':
					return 'ja';
				default:
					return 'en';
			}
		})(navigator.language)
		var _locale = (locale == "zh" ? "en" : locale);
		//locale = "en" // debug
		var mailBody = langs[_locale]["mailBody"];
		var mailBodyIndex = parseInt(Math.random() * mailBody.length);
		mailBody = mailBody[mailBodyIndex];

		function update() {
			mailBody = langs[_locale]["mailBody"];
			mailBodyIndex = parseInt(Math.random() * mailBody.length);
			mailBody = mailBody[mailBodyIndex]
				.replace(/%company_name%/g, recv.company[_locale])
				.replace(/%user_name%/g, author)
				.replace(/%user_nationality%/g, country);
			$("#mailBody").html(mailBody)
			$("h4#mode").html("Mode: " + langs[locale]["modeText"][mode]);
			//$("p#locale").html("Localization: " + langs[locale]["langText"])
			$("button#g").html(langs[locale]["g"])
			$("button#t").html(langs[locale]["t"])

			$("#sp").find("option").remove().end()
			for (var i in sps) {
				$("#sp").append($("<option></option>").attr("value", i).text(sps[i].company[locale]))
			}
			$("#sp").val(sps.indexOf(recv))

			$("div#email").html("Email: " + recv.email);
			$("label#name").html(langs[locale]["name"])
			$("label#country").html(langs[locale]["country"])
			$("label#recv").html(langs[locale]["recv"])
			$("div#submit").html(langs[locale]["submit"])
		}

		$(document).ready(() => {
			update();

			$("select#lang").val(locale);
		});

		function updateLang() {
			locale = $("select#lang").val();
			_locale = (locale == "zh" ? "en" : locale);
			update()
		}

		function updateRecv() {
			recv = sps[parseInt($("#sp").val())];
			update();
		}
		$("#sp").on("change", updateRecv);
		$("select#lang").on("change", updateLang);
		$("input#sender").on("input", () => {
			author = $("input#sender").val()
			update();
		})

		$("input#country").on("input", () => {
			country = $("input#country").val()
			update();
		})

		function mailAction(e) {
			mode = parseInt(e.dataset["type"])
			update();
		}

		function sendEmail() {
			if (!author.length) {
				return alert("Please have username!")
			}
			if (!country.length) {
				return alert("Please have nationality!")
			}
			var subject = langs[_locale]["mailSubject"][parseInt(Math.random() * langs[_locale]["mailSubject"].length)]

			var link = mailAPI[mode].replace("!SUBJECT!", encodeURIComponent(subject)).replace("!RECV!", encodeURIComponent(recv.email)).replace("!BODY!", encodeURIComponent(mailBody))

			window.open(link, "_blank").focus();
		}

		/*setInterval(() => {
			updateRecv()
			updateLang()
			update()
		}, 1000)*/
	</script>
</body>

</html>
